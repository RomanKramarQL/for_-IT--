# ДДС: веб-приложение для учёта движения денежных средств

Простое веб-приложение на чистом Python/WSGI для выполнения тестового задания: учёт поступлений и списаний денежных средств с управлением справочниками статусов, типов, категорий и подкатегорий.

## Возможности

- Создание, редактирование и удаление записей ДДС с проверкой логических связей.
- Фильтрация списка записей по дате, статусу, типу, категории и подкатегории.
- Управление справочниками (статусы, типы, категории, подкатегории) с проверкой зависимостей перед удалением или изменением.
- Валидация на стороне сервера: обязательные поля, корректность сумм, целостность связей.
- Автосоздание SQLite-базы данных с начальными справочниками (Бизнес/Личное/Налог, Пополнение/Списание и примерные категории).

## Требования

- Python 3.12+ (используются только стандартные библиотеки, поэтому дополнительные зависимости не нужны).

## Запуск проекта

1. Инициализируйте базу данных (создастся файл `dds_app/dds.sqlite3` и заполнятся справочники по умолчанию):

   ```bash
   python manage.py init-db
   ```

2. Запустите встроенный WSGI-сервер. Теперь можно просто выполнить:

   ```bash
   python run.py
   ```

   Скрипт автоматически подготовит базу данных и поднимет сервер на `http://127.0.0.1:8000`. При необходимости по-прежнему доступна команда `python manage.py runserver --host 0.0.0.0 --port 8000`.

3. Откройте [http://127.0.0.1:8000](http://127.0.0.1:8000) в браузере. На главной странице доступна таблица записей ДДС и фильтры. Навигация в шапке ведёт к формам добавления записей и управления справочниками.

## Структура проекта

```
.
├── dds_app
│   ├── __init__.py
│   ├── db.py              # инициализация SQLite и запросы низкого уровня
│   ├── repository.py      # высокоуровневые операции с данными
│   └── server.py          # WSGI-приложение и маршрутизация
├── manage.py              # CLI для инициализации БД и запуска сервера
├── README.md
└── [back] Тестовое задание (backend-разработчик).pdf
```

## Логические проверки

- Категорию можно выбрать только внутри выбранного типа.
- Подкатегория должна принадлежать категории и типу, указанным в записи.
- Перед удалением или переносом справочника проверяется наличие связанных записей ДДС.
- Сумма хранится в копейках (целое число) для исключения ошибок округления.

## Ограничения

Из-за отсутствия доступа к внешнему интернету проект реализован без Django, полностью на стандартной библиотеке Python. Функционально выполняются требования тестового задания, а код легко перенести на любой WSGI-сервер или контейнер.
